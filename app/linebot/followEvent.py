from linebot.models import *
from app import app
from app.linebot import line_bot_api, handler, user

#æ–°å¥½å‹æ­¡è¿(insert user id)
@handler.add(FollowEvent)
def handle_follow(event):
    user_id = event.source.user_id
    user.insertOne(user_id)
    app.logger.info("Got Follow event:" + event.source.user_id)

    welcome_text = '''åˆæ¬¡è¦‹é¢ï¼æˆ‘æ˜¯æ¸…å¤§æ ¡åœ’æƒ…å ±å“¡ï¼Œä½ å¯ä»¥å«æˆ‘ç‹—ç‹—æƒ…å ±å“¡ï¼ç”Ÿæ´»ä¸Šçš„å¤§å°äº‹ï¼Œåªè¦æ˜¯ä½ é‡åˆ°çš„å•é¡Œï¼Œæˆ‘éƒ½æœƒåŠªåŠ›å¹«ä½ è§£æ±ºå”·ï¼
    
ä½ å¯ä»¥~~à¸…'Ï‰'à¸…
ğŸš©å–å¾—/è©¢å•æ–°å‹å† ç‹€ç—…æ¯’è³‡è¨Šï¼
ğŸš©ç´¢å–æ ¡å·´æ™‚åˆ»è¡¨
ğŸš©è©¢å•æ ¡å‹™ç›¸é—œå•é¡ŒğŸ’¬
ğŸš©æˆ–è®“æœ¬æ±ªå¸¶ä½ åœ¨æ¸…å¤§è¶´è¶´èµ°ï¼ 

èº«ç‚ºä¸€å€‹å¥½çš„æƒ…å ±å“¡ï¼Œæœ‰ä»»ä½•æ¶ˆæ¯æˆ‘ä¹Ÿæœƒç›¡å¿«å›å ±çš„ï¼ï¼

å¦‚æœè¦ºå¾—æœ¬æ±ªå“ªè£¡ä¸å¥½ï¼Œæƒ³çµ¦æˆ‘å»ºè­°
æˆ–æ„Ÿåˆ°ç„¡èŠæƒ³è½ç¬‘è©±æˆ–æƒ³åˆ†äº«ç¬‘è©±
è«‹è¼¸å…¥ã€ï¼ã€æœƒæœ‰é¡å¤–çš„åŠŸèƒ½å”·

ä½œç‚ºä¸€éš»ç‹—ç‹—ï¼Œæœ‰æ™‚å€™æœƒå¤ªç†±æƒ…ï¼Œå¦‚æœè¦ºå¾—æˆ‘æœ‰é»åµçš„è©±ï¼Œè«‹å°‡ã€Œæé†’ã€åŠŸèƒ½é—œé–‰å°±å¥½ğŸ“µï¼Œåƒè¬ä¸è¦å°é–æœ¬æ±ªå¥½å—ï¼Œæˆ‘ä¸€å®šæœƒä¹–ä¹–çš„å–”ï¼
    '''
    line_bot_api.reply_message(event.reply_token, TextSendMessage(text=welcome_text))
